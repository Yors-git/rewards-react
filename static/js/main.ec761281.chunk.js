(this["webpackJsonprewards-react"]=this["webpackJsonprewards-react"]||[]).push([[0],{26:function(e,t,n){},32:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(19),s=n.n(r),i=(n(26),n(21)),l=n(8),j=Object.freeze({}),o=Object(a.createContext)(j),d=function(){return Object(a.useContext)(o)},u=[{clientName:"Jorge",id:1,transactions:[{purchase:"120",reward:90,transDate:new Date("7/4/2021, 1:51:52 PM")},{purchase:"80",reward:30,transDate:new Date("6/4/2021, 1:51:52 PM")},{purchase:"130",reward:110,transDate:new Date("5/4/2021, 1:51:52 PM")},{purchase:"120",reward:90,transDate:new Date("3/4/2021, 1:51:52 PM")}]}],h=n(1),b=function(e){var t=e.children,n=Object(a.useState)(u),c=Object(l.a)(n,2),r=c[0],s=c[1],j=Object(a.useState)({}),d=Object(l.a)(j,2),b=d[0],m=d[1];var x={data:{userData:r,currentClient:b},commands:{storeData:function(e){e.id=r.length+1,e.transactions=[],s([].concat(Object(i.a)(r),[e]))},fixCurrentClient:function(e){!function(e){var t=e,n=new Date;n.setMonth(n.getMonth()-0);var a=new Date;a.setMonth(a.getMonth()-3);var c=t.transactions.filter((function(e){return e.transDate>a&&e.transDate<n}));t.transactions=c}(e),m(e)},addTransToClient:function(e){var t,n={reward:(t=e)<=50?0:t>50&&t<=100?t-50:2*(t-100)+50,transDate:new Date,purchase:t};b.transactions.push(n)},getTransByInterval:function(e,t,n){var a=new Date;a.setMonth(a.getMonth()-t);var c=new Date;c.setMonth(c.getMonth()-n);var r=e.transactions.filter((function(e){return e.transDate>c&&e.transDate<a}));if(r.length>0)return r.map((function(e){return e.reward})).reduce((function(e,t){return e+t}));return 0}}};return Object(h.jsx)(o.Provider,{value:x,children:t})},m=n(14),x=n(7),O=n(13),f=n(9),p=n(6),N=function(){var e=d(),t=e.data.userData,n=e.commands.fixCurrentClient,c=Object(a.useState)({clientName:""}),r=Object(l.a)(c,2),s=r[0],i=r[1];return Object(h.jsx)(x.a,{className:"justify-content-md-center p-3",children:Object(h.jsxs)(p.a,{onSubmit:function(e){e.preventDefault(e);var a=t.find((function(e){return e.clientName===s.clientName}));if(!a)return i({clientName:""}),alert("User doesn't exists please create it first");n(a),i({clientName:""})},children:[Object(h.jsxs)(p.a.Group,{className:"align-items-center col-xs-3",children:[Object(h.jsx)(p.a.Label,{children:Object(h.jsx)("h5",{children:"Search Client"})}),Object(h.jsx)(p.a.Control,{className:"mb-2",placeholder:"Enter name please",onChange:function(e){e.preventDefault(),i(Object(O.a)({},e.target.name,e.target.value))},value:s.clientName,name:"clientName"})]}),Object(h.jsx)(f.a,{type:"submit",variant:"success",className:"mb-2",children:"Search Client"})]})})},v=function(){var e=d(),t=e.data.userData,n=e.commands,c=n.storeData,r=n.fixCurrentClient,s=Object(a.useState)({clientName:""}),i=Object(l.a)(s,2),j=i[0],o=i[1];return Object(h.jsx)(x.a,{className:"justify-content-md-center p-3",children:Object(h.jsxs)(p.a,{onSubmit:function(e){if(e.preventDefault(e),t.find((function(e){return e.clientName===j.clientName})))return o({clientName:""}),alert("User already exists, please try another one");c(j),r(j),o({clientName:""})},children:[Object(h.jsxs)(p.a.Group,{className:"align-items-center",children:[Object(h.jsx)(p.a.Label,{children:Object(h.jsx)("h5",{children:"Create New Client"})}),Object(h.jsx)(p.a.Control,{className:"mb-2",placeholder:"Enter name please",onChange:function(e){e.preventDefault(),o(Object(O.a)({},e.target.name,e.target.value))},value:j.clientName,name:"clientName"})]}),Object(h.jsx)(f.a,{type:"submit",variant:"primary",className:"mb-2",children:"Create Client"})]})})},g=n(10),D=n(20),C=function(){var e,t=Object(a.useState)(""),n=Object(l.a)(t,2),c=n[0],r=n[1],s=d(),i=s.data.currentClient,j=s.commands,o=j.addTransToClient,u=j.getTransByInterval;return Object(h.jsx)(m.a,{className:"mt-5 justify-content-start",children:Object(h.jsxs)(g.a,{xs:"auto",children:[(null===i||void 0===i?void 0:i.clientName)&&Object(h.jsxs)(p.a,{onSubmit:function(e){e.preventDefault(e),o(c),r("")},children:[Object(h.jsxs)(p.a.Group,{children:[Object(h.jsx)(x.a,{className:"justify-content-start",children:Object(h.jsx)(p.a.Label,{className:"px-3",children:Object(h.jsx)("strong",{children:"Create New Transaction"})})}),Object(h.jsxs)(x.a,{className:"justify-content-start",children:[Object(h.jsx)(g.a,{xs:"auto",children:Object(h.jsx)(p.a.Control,{size:"sm",className:"mb-2",placeholder:"Enter Amount",name:"amount",onChange:function(e){e.preventDefault(e),r(e.target.value)},value:c})}),Object(h.jsx)(g.a,{xs:"auto",children:Object(h.jsx)(f.a,{type:"submit",variant:"warning",className:"mb-2",size:"sm",children:"Add Transaction"})})]})]}),Object(h.jsx)(x.a,{children:Object(h.jsx)("h3",{className:"p-3",children:"".concat(i.clientName,"'s Transaction Summary:")})}),Object(h.jsxs)(x.a,{children:[Object(h.jsxs)("p",{className:"px-3",children:["Total reward points:"," ",Object(h.jsx)("strong",{children:u(i,0,3)})]}),Object(h.jsxs)("p",{className:"px-3",children:["This Month:"," ",Object(h.jsx)("strong",{children:u(i,0,1)})]}),Object(h.jsxs)("p",{className:"px-3",children:["Last Month:"," ",Object(h.jsx)("strong",{children:u(i,1,2)})]}),Object(h.jsxs)("p",{className:"px-3",children:["2 Months ago:"," ",Object(h.jsx)("strong",{children:u(i,2,3)})]})]})]}),(null===i||void 0===i||null===(e=i.transactions)||void 0===e?void 0:e.length)>0?Object(h.jsxs)(D.a,{striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"#"}),Object(h.jsx)("th",{children:"Transaction Date"}),Object(h.jsx)("th",{children:"Purchase Amount"}),Object(h.jsx)("th",{children:"Reward"})]})}),Object(h.jsx)("tbody",{children:i.transactions.map((function(e){return Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:i.transactions.indexOf(e)+1}),Object(h.jsx)("td",{children:e.transDate.toLocaleString()}),Object(h.jsx)("td",{children:e.purchase}),Object(h.jsx)("td",{children:e.reward})]},i.transactions.indexOf(e)+1)}))})]}):i.clientName&&Object(h.jsx)(x.a,{className:"justify-content-start px-3",children:"No valid transactions at the moment"})]})})},w=(n(31),function(){return Object(h.jsx)(b,{children:Object(h.jsxs)(m.a,{className:"pt-3",children:[Object(h.jsx)(x.a,{className:"justify-content-center",children:Object(h.jsx)("h1",{className:"pt-5",children:"Rewards App"})}),Object(h.jsxs)(x.a,{className:"justify-content-around",children:[Object(h.jsx)(N,{}),Object(h.jsx)(v,{})]}),Object(h.jsx)(x.a,{children:Object(h.jsx)(C,{})})]})})}),y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,33)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};s.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(w,{})}),document.getElementById("root")),y()}},[[32,1,2]]]);
//# sourceMappingURL=main.ec761281.chunk.js.map